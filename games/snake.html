<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<title>Snake — Canvas</title>
<style>
  body{display:flex;flex-direction:column;align-items:center;background:#111;color:#eee;font-family:system-ui;margin:20px}
  canvas{background:#000;border:4px solid #222}
  button{margin-top:10px;padding:8px 12px;border-radius:6px;border:0;background:#0b7;color:#002;cursor:pointer}
</style>
</head>
<body>
<h3>Snake</h3>
<canvas id="c" width="400" height="400"></canvas>
<div>Score: <span id="score">0</span></div>
<button id="start">Start / Restart</button>

<script>
const canvas=document.getElementById('c'),ctx=canvas.getContext('2d');
const scoreEl=document.getElementById('score'), startBtn=document.getElementById('start');
const cols=20, rows=20, cell=canvas.width/cols;
let snake, dir, food, score, tick, running;

function randCell(){ return {x:Math.floor(Math.random()*cols), y:Math.floor(Math.random()*rows)}; }

function init(){
  snake=[{x:9,y:9},{x:8,y:9},{x:7,y:9}];
  dir={x:1,y:0}; food=spawnFood(); score=0; tick=0; running=true;
  scoreEl.textContent=score;
  loop();
}

function spawnFood(){
  let f;
  while(true){
    f=randCell();
    if(!snake.some(s=>s.x===f.x && s.y===f.y)) return f;
  }
}

function step(){
  const head={x:snake[0].x+dir.x, y:snake[0].y+dir.y};
  // wrap-around (comment these 3 lines to enable wall death)
  head.x=(head.x+cols)%cols; head.y=(head.y+rows)%rows;
  // wall death (uncomment to use instead of wrap)
  // if(head.x<0||head.x>=cols||head.y<0||head.y>=rows) return gameOver();

  if(snake.some(s=>s.x===head.x&&s.y===head.y)) return gameOver();
  snake.unshift(head);
  if(head.x===food.x && head.y===food.y){ score+=10; food=spawnFood(); scoreEl.textContent=score; }
  else snake.pop();
}

function gameOver(){ running=false; ctx.fillStyle='rgba(0,0,0,0.6)'; ctx.fillRect(0,canvas.height/2-30,canvas.width,60);
 ctx.fillStyle='#fff'; ctx.textAlign='center'; ctx.font='24px system-ui'; ctx.fillText('Game Over — Press Start',canvas.width/2,canvas.height/2+8); }

function draw(){
  ctx.fillStyle='#000'; ctx.fillRect(0,0,canvas.width,canvas.height);
  // grid optional: ctx.strokeStyle='#111'; for(let i=0;i<=cols;i++){ctx.beginPath();ctx.moveTo(i*cell,0);ctx.lineTo(i*cell,canvas.height);ctx.stroke()}
  // food
  ctx.fillStyle='red'; ctx.fillRect(food.x*cell+2,food.y*cell+2,cell-4,cell-4);
  // snake
  ctx.fillStyle='#7CFC00'; snake.forEach((s,i)=>{ ctx.fillStyle = i? '#0f0' : '#7CFC00'; ctx.fillRect(s.x*cell+1,s.y*cell+1,cell-2,cell-2); });
}

function loop(ts){
  if(!running) return;
  tick++;
  // speed up as score rises
  const speed = Math.max(6, 12 - Math.floor(score/50)); // frames per move
  if(tick%speed===0) step();
  draw();
  requestAnimationFrame(loop);
}

window.addEventListener('keydown', e=>{
  if(!running && ['ArrowUp','ArrowDown','ArrowLeft','ArrowRight','w','a','s','d'].includes(e.key)) return;
  if(e.key==='ArrowUp' || e.key==='w'){ if(dir.y!==1) dir={x:0,y:-1}; }
  if(e.key==='ArrowDown' || e.key==='s'){ if(dir.y!==-1) dir={x:0,y:1}; }
  if(e.key==='ArrowLeft' || e.key==='a'){ if(dir.x!==1) dir={x:-1,y:0}; }
  if(e.key==='ArrowRight' || e.key==='d'){ if(dir.x!==-1) dir={x:1,y:0}; }
  if(e.key===' '){ if(!running) init(); else { /* space to pause/resume could go here */ } }
});

startBtn.addEventListener('click', ()=>init());

// initial draw
snake=[{x:9,y:9},{x:8,y:9},{x:7,y:9}];
food=spawnFood(); draw();
</script>
</body>
</html>